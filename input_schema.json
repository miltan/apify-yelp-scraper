{
  "schemaVersion": 1,
  "title": "Yelp Business Scraper",
  "description": "Scrape Yelp search results, visit each business page, and optionally crawl the business website to extract emails, phones, and social links.",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "search": {
      "title": "Keyword",
      "description": "Business type or keyword to search on Yelp (e.g., plumber, dentist, coffee). Ignored if a Yelp search URL is provided.",
      "type": "string",
      "editor": "textfield",
      "default": "plumber"
    },
    "location": {
      "title": "Location",
      "description": "City/area to search in (e.g., San Francisco, CA). Ignored if a Yelp search URL is provided.",
      "type": "string",
      "editor": "textfield",
      "default": "San Francisco, CA"
    },
    "yelpSearchUrl": {
      "title": "Yelp search URL (optional)",
      "description": "Full Yelp search URL. If provided, overrides Keyword + Location.",
      "type": "string",
      "editor": "textfield",
      "default": ""
    },
    "maxResults": {
      "title": "Max results",
      "description": "Maximum number of business listings to collect (approximate due to pagination).",
      "type": "integer",
      "minimum": 1,
      "maximum": 10000,
      "editor": "number",
      "default": 200
    },
    "fetchContactsFromWebsite": {
      "title": "Also scrape business website",
      "description": "If true, the actor will visit the business website (when available) and try common contact pages to extract emails, phones, and social links.",
      "type": "boolean",
      "editor": "checkbox",
      "default": true
    },
    "contactPagePaths": {
      "title": "Website paths to try",
      "description": "Relative paths appended to the business website to look for contact info. Homepage is always tried first.",
      "type": "array",
      "editor": "array",
      "items": { "type": "string" },
      "uniqueItems": true,
      "minItems": 1,
      "default": ["/contact", "/contact-us", "/about", "/about-us"]
    },
    "websiteRequestTimeoutMs": {
      "title": "Website request timeout (ms)",
      "description": "Timeout used when fetching business websites during contact enrichment.",
      "type": "integer",
      "minimum": 3000,
      "maximum": 60000,
      "editor": "number",
      "default": 15000
    },
    "useResidentialProxy": {
      "title": "Use Apify Residential proxy",
      "description": "Recommended for Yelp. If false, datacenter IPs are used (more likely to be blocked).",
      "type": "boolean",
      "editor": "checkbox",
      "default": true
    },
    "proxyCountryCode": {
      "title": "Proxy country code",
      "description": "2-letter country code for proxies (e.g., US). Ignored if residential proxies are disabled.",
      "type": "string",
      "pattern": "^[A-Z]{2}$",
      "editor": "textfield",
      "default": "US"
    },
    "maxConcurrency": {
      "title": "Max concurrency",
      "description": "Maximum number of parallel browser pages (Playwright). Lower if you hit captchas or blocks.",
      "type": "integer",
      "minimum": 1,
      "maximum": 20,
      "editor": "number",
      "default": 5
    },
    "debugScreenshots": {
      "title": "Save screenshots on failure",
      "description": "If true, saves a full-page screenshot when a page fails (useful for diagnosing cookie walls/captchas).",
      "type": "boolean",
      "editor": "checkbox",
      "default": true
    }
  },
  "required": []
}